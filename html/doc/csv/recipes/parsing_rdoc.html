<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>parsing - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/navigation.js" defer></script>
<script src="../../../js/search.js" defer></script>
<script src="../../../js/search_index.js" defer></script>
<script src="../../../js/searcher.js" defer></script>
<script src="../../../js/darkfish.js" defer></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">




<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#label-Recipes+for+Parsing+CSV">Recipes for Parsing CSV</a>
    <li><a href="#label-Contents">Contents</a>
    <li><a href="#label-Source+Formats">Source Formats</a>
    <li><a href="#label-Parsing+from+a+String">Parsing from a String</a>
    <li><a href="#label-Recipe-3A+Parse+from+String+with+Headers">Recipe: Parse from String with Headers</a>
    <li><a href="#label-Recipe-3A+Parse+from+String+Without+Headers">Recipe: Parse from String Without Headers</a>
    <li><a href="#label-Parsing+from+a+File">Parsing from a File</a>
    <li><a href="#label-Recipe-3A+Parse+from+File+with+Headers">Recipe: Parse from File with Headers</a>
    <li><a href="#label-Recipe-3A+Parse+from+File+Without+Headers">Recipe: Parse from File Without Headers</a>
    <li><a href="#label-Parsing+from+an+IO+Stream">Parsing from an IO Stream</a>
    <li><a href="#label-Recipe-3A+Parse+from+IO+Stream+with+Headers">Recipe: Parse from IO Stream with Headers</a>
    <li><a href="#label-Recipe-3A+Parse+from+IO+Stream+Without+Headers">Recipe: Parse from IO Stream Without Headers</a>
    <li><a href="#label-RFC+4180+Compliance">RFC 4180 Compliance</a>
    <li><a href="#label-Row+Separator">Row Separator</a>
    <li><a href="#label-Recipe-3A+Handle+Compliant+Row+Separator">Recipe: Handle Compliant Row Separator</a>
    <li><a href="#label-Recipe-3A+Handle+Non-Compliant+Row+Separator">Recipe: Handle Non-Compliant Row Separator</a>
    <li><a href="#label-Column+Separator">Column Separator</a>
    <li><a href="#label-Recipe-3A+Handle+Compliant+Column+Separator">Recipe: Handle Compliant Column Separator</a>
    <li><a href="#label-Recipe-3A+Handle+Non-Compliant+Column+Separator">Recipe: Handle Non-Compliant Column Separator</a>
    <li><a href="#label-Quote+Character">Quote Character</a>
    <li><a href="#label-Recipe-3A+Handle+Compliant+Quote+Character">Recipe: Handle Compliant Quote Character</a>
    <li><a href="#label-Recipe-3A+Handle+Non-Compliant+Quote+Character">Recipe: Handle Non-Compliant Quote Character</a>
    <li><a href="#label-Recipe-3A+Allow+Liberal+Parsing">Recipe: Allow Liberal Parsing</a>
    <li><a href="#label-Special+Handling">Special Handling</a>
    <li><a href="#label-Special+Line+Handling">Special Line Handling</a>
    <li><a href="#label-Recipe-3A+Ignore+Blank+Lines">Recipe: Ignore Blank Lines</a>
    <li><a href="#label-Recipe-3A+Ignore+Selected+Lines">Recipe: Ignore Selected Lines</a>
    <li><a href="#label-Special+Field+Handling">Special Field Handling</a>
    <li><a href="#label-Recipe-3A+Strip+Fields">Recipe: Strip Fields</a>
    <li><a href="#label-Recipe-3A+Handle+Null+Fields">Recipe: Handle Null Fields</a>
    <li><a href="#label-Recipe-3A+Handle+Empty+Fields">Recipe: Handle Empty Fields</a>
    <li><a href="#label-Converting+Fields">Converting Fields</a>
    <li><a href="#label-Converting+Fields+to+Objects">Converting Fields to Objects</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+Integers">Recipe: Convert Fields to Integers</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+Floats">Recipe: Convert Fields to Floats</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+Numerics">Recipe: Convert Fields to Numerics</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+Dates">Recipe: Convert Fields to Dates</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+DateTimes">Recipe: Convert Fields to DateTimes</a>
    <li><a href="#label-Recipe-3A+Convert+Assorted+Fields+to+Objects">Recipe: Convert Assorted Fields to Objects</a>
    <li><a href="#label-Recipe-3A+Convert+Fields+to+Other+Objects">Recipe: Convert Fields to Other Objects</a>
    <li><a href="#label-Recipe-3A+Filter+Field+Strings">Recipe: Filter Field Strings</a>
    <li><a href="#label-Recipe-3A+Register+Field+Converters">Recipe: Register Field Converters</a>
    <li><a href="#label-Using+Multiple+Field+Converters">Using Multiple Field Converters</a>
    <li><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+Option+-3Aconverters">Recipe: Specify Multiple Field Converters in Option <code>:converters</code></a>
    <li><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+a+Custom+Converter+List">Recipe: Specify Multiple Field Converters in a Custom Converter List</a>
    <li><a href="#label-Converting+Headers">Converting Headers</a>
    <li><a href="#label-Recipe-3A+Convert+Headers+to+Lowercase">Recipe: Convert Headers to Lowercase</a>
    <li><a href="#label-Recipe-3A+Convert+Headers+to+Symbols">Recipe: Convert Headers to Symbols</a>
    <li><a href="#label-Recipe-3A+Filter+Header+Strings">Recipe: Filter Header Strings</a>
    <li><a href="#label-Recipe-3A+Register+Header+Converters">Recipe: Register Header Converters</a>
    <li><a href="#label-Using+Multiple+Header+Converters">Using Multiple Header Converters</a>
    <li><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+Option+-3Aheader_converters">Recipe: Specify Multiple Header Converters in Option :header_converters</a>
    <li><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+a+Custom+Header+Converter+List">Recipe: Specify Multiple Header Converters in a Custom Header Converter List</a>
    <li><a href="#label-Diagnostics">Diagnostics</a>
    <li><a href="#label-Recipe-3A+Capture+Unconverted+Fields">Recipe: Capture Unconverted Fields</a>
    <li><a href="#label-Recipe-3A+Capture+Field+Info">Recipe: Capture Field Info</a>
  </ul>
</div>


  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../NEWS_md.html">NEWS</a>
  
    <li><a href="../../../README_md.html">README</a>
  
    <li><a href="../../../doc/csv/recipes/filtering_rdoc.html">filtering</a>
  
    <li><a href="../../../doc/csv/recipes/generating_rdoc.html">generating</a>
  
    <li><a href="../../../doc/csv/recipes/parsing_rdoc.html">parsing</a>
  
    <li><a href="../../../doc/csv/recipes/recipes_rdoc.html">recipes</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page doc/csv/recipes/parsing.rdoc">

<h2 id="label-Recipes+for+Parsing+CSV">Recipes for Parsing CSV<span><a href="#label-Recipes+for+Parsing+CSV">&para;</a> <a href="#top">&uarr;</a></span></h2>

<p>For other recipes, see <a href="./recipes_rdoc.html">Recipes for CSV</a>.</p>

<p>All code snippets on this page assume that the following has been executed:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;csv&#39;</span>
</pre>

<h3 id="label-Contents">Contents<span><a href="#label-Contents">&para;</a> <a href="#top">&uarr;</a></span></h3>
<ul><li>
<p><a href="#label-Source+Formats">Source Formats</a></p>
<ul><li>
<p><a href="#label-Parsing+from+a+String">Parsing from a String</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Parse+from+String+with+Headers">Recipe: Parse from String with Headers</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Parse+from+String+Without+Headers">Recipe: Parse from String Without Headers</a></p>
</li></ul>
</li><li>
<p><a href="#label-Parsing+from+a+File">Parsing from a File</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Parse+from+File+with+Headers">Recipe: Parse from File with Headers</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Parse+from+File+Without+Headers">Recipe: Parse from File Without Headers</a></p>
</li></ul>
</li><li>
<p><a href="#label-Parsing+from+an+IO+Stream">Parsing from an IO Stream</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Parse+from+IO+Stream+with+Headers">Recipe: Parse from IO Stream with Headers</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Parse+from+IO+Stream+Without+Headers">Recipe: Parse from IO Stream Without Headers</a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="#label-RFC+4180+Compliance">RFC 4180 Compliance</a></p>
<ul><li>
<p><a href="#label-Row+Separator">Row Separator</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Handle+Compliant+Row+Separator">Recipe: Handle Compliant Row Separator</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Handle+Non-Compliant+Row+Separator">Recipe: Handle Non-Compliant Row Separator</a></p>
</li></ul>
</li><li>
<p><a href="#label-Column+Separator">Column Separator</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Handle+Compliant+Column+Separator">Recipe: Handle Compliant Column Separator</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Handle+Non-Compliant+Column+Separator">Recipe: Handle Non-Compliant Column Separator</a></p>
</li></ul>
</li><li>
<p><a href="#label-Quote+Character">Quote Character</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Handle+Compliant+Quote+Character">Recipe: Handle Compliant Quote Character</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Handle+Non-Compliant+Quote+Character">Recipe: Handle Non-Compliant Quote Character</a></p>
</li></ul>
</li><li>
<p><a href="#label-Recipe-3A+Allow+Liberal+Parsing">Recipe: Allow Liberal Parsing</a></p>
</li></ul>
</li><li>
<p><a href="#label-Special+Handling">Special Handling</a></p>
<ul><li>
<p><a href="#label-Special+Line+Handling">Special Line Handling</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Ignore+Blank+Lines">Recipe: Ignore Blank Lines</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Ignore+Selected+Lines">Recipe: Ignore Selected Lines</a></p>
</li></ul>
</li><li>
<p><a href="#label-Special+Field+Handling">Special Field Handling</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Strip+Fields">Recipe: Strip Fields</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Handle+Null+Fields">Recipe: Handle Null Fields</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Handle+Empty+Fields">Recipe: Handle Empty Fields</a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="#label-Converting+Fields">Converting Fields</a></p>
<ul><li>
<p><a href="#label-Converting+Fields+to+Objects">Converting Fields to Objects</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+Integers">Recipe: Convert Fields to Integers</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+Floats">Recipe: Convert Fields to Floats</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+Numerics">Recipe: Convert Fields to Numerics</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+Dates">Recipe: Convert Fields to Dates</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+DateTimes">Recipe: Convert Fields to DateTimes</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Assorted+Fields+to+Objects">Recipe: Convert Assorted Fields to Objects</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Fields+to+Other+Objects">Recipe: Convert Fields to Other Objects</a></p>
</li></ul>
</li><li>
<p><a href="#label-Recipe-3A+Filter+Field+Strings">Recipe: Filter Field Strings</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Register+Field+Converters">Recipe: Register Field Converters</a></p>
</li><li>
<p><a href="#label-Using+Multiple+Field+Converters">Using Multiple Field Converters</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+Option+-3Aconverters">Recipe: Specify Multiple Field Converters in Option :converters</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+a+Custom+Converter+List">Recipe: Specify Multiple Field Converters in a Custom Converter List</a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="#label-Converting+Headers">Converting Headers</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Convert+Headers+to+Lowercase">Recipe: Convert Headers to Lowercase</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Convert+Headers+to+Symbols">Recipe: Convert Headers to Symbols</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Filter+Header+Strings">Recipe: Filter Header Strings</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Register+Header+Converters">Recipe: Register Header Converters</a></p>
</li><li>
<p><a href="#label-Using+Multiple+Header+Converters">Using Multiple Header Converters</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+Option+-3Aheader_converters">Recipe: Specify Multiple Header Converters in Option :header_converters</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+a+Custom+Header+Converter+List">Recipe: Specify Multiple Header Converters in a Custom Header Converter List</a></p>
</li></ul>
</li></ul>
</li><li>
<p><a href="#label-Diagnostics">Diagnostics</a></p>
<ul><li>
<p><a href="#label-Recipe-3A+Capture+Unconverted+Fields">Recipe: Capture Unconverted Fields</a></p>
</li><li>
<p><a href="#label-Recipe-3A+Capture+Field+Info">Recipe: Capture Field Info</a></p>
</li></ul>
</li></ul>

<h3 id="label-Source+Formats">Source Formats<span><a href="#label-Source+Formats">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can parse CSV data from a String, from a File (via its path), or from an IO stream.</p>

<h4 id="label-Parsing+from+a+String">Parsing from a String<span><a href="#label-Parsing+from+a+String">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can parse CSV data from a String, with or without headers.</p>

<h5 id="label-Recipe-3A+Parse+from+String+with+Headers">Recipe: Parse from String with Headers<span><a href="#label-Recipe-3A+Parse+from+String+with+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use class method <a href="../../../CSV.html#method-c-parse"><code>CSV.parse</code></a> with option <code>headers</code> to read a source String all at once (may have memory resource implications):</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span>
</pre>

<p>Use instance method <a href="../../../CSV.html#method-i-each"><code>CSV#each</code></a> with option <code>headers</code> to read a source String one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">string</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Ouput:</p>

<pre class="ruby"><span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;</span>
</pre>

<h5 id="label-Recipe-3A+Parse+from+String+Without+Headers">Recipe: Parse from String Without Headers<span><a href="#label-Recipe-3A+Parse+from+String+Without+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use class method <a href="../../../CSV.html#method-c-parse"><code>CSV.parse</code></a> without option <code>headers</code> to read a source String all at once (may have memory resource implications):</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;foo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">string</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<p>Use instance method <a href="../../../CSV.html#method-i-each"><code>CSV#each</code></a> without option <code>headers</code> to read a source String one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">string</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby">[<span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-string">&quot;0&quot;</span>]
[<span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-string">&quot;1&quot;</span>]
[<span class="ruby-string">&quot;baz&quot;</span>, <span class="ruby-string">&quot;2&quot;</span>]
</pre>

<h4 id="label-Parsing+from+a+File">Parsing from a File<span><a href="#label-Parsing+from+a+File">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can parse CSV data from a File, with or without headers.</p>

<h5 id="label-Recipe-3A+Parse+from+File+with+Headers">Recipe: Parse from File with Headers<span><a href="#label-Recipe-3A+Parse+from+File+with+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use instance method <a href="../../../CSV.html#method-i-read"><code>CSV#read</code></a> with option <code>headers</code> to read a file all at once:</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">path</span> = <span class="ruby-string">&#39;t.csv&#39;</span>
<span class="ruby-constant">File</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">string</span>)
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span>
</pre>

<p>Use class method <a href="../../../CSV.html#method-c-foreach"><code>CSV.foreach</code></a> with option <code>headers</code> to read one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;</span>
</pre>

<h5 id="label-Recipe-3A+Parse+from+File+Without+Headers">Recipe: Parse from File Without Headers<span><a href="#label-Recipe-3A+Parse+from+File+Without+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use class method <a href="../../../CSV.html#method-c-read"><code>CSV.read</code></a> without option <code>headers</code> to read a file all at once:</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;foo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">path</span> = <span class="ruby-string">&#39;t.csv&#39;</span>
<span class="ruby-constant">File</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">string</span>)
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">path</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<p>Use class method <a href="../../../CSV.html#method-c-foreach"><code>CSV.foreach</code></a> without option <code>headers</code> to read one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby">[<span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-string">&quot;0&quot;</span>]
[<span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-string">&quot;1&quot;</span>]
[<span class="ruby-string">&quot;baz&quot;</span>, <span class="ruby-string">&quot;2&quot;</span>]
</pre>

<h4 id="label-Parsing+from+an+IO+Stream">Parsing from an IO Stream<span><a href="#label-Parsing+from+an+IO+Stream">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can parse CSV data from an IO stream, with or without headers.</p>

<h5 id="label-Recipe-3A+Parse+from+IO+Stream+with+Headers">Recipe: Parse from IO Stream with Headers<span><a href="#label-Recipe-3A+Parse+from+IO+Stream+with+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use class method <a href="../../../CSV.html#method-c-parse"><code>CSV.parse</code></a> with option <code>headers</code> to read an IO stream all at once:</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">path</span> = <span class="ruby-string">&#39;t.csv&#39;</span>
<span class="ruby-constant">File</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">string</span>)
<span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
  <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">file</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-keyword">end</span> <span class="ruby-comment"># =&gt; #&lt;CSV::Table mode:col_or_row row_count:4&gt;</span>
</pre>

<p>Use class method <a href="../../../CSV.html#method-c-foreach"><code>CSV.foreach</code></a> with option <code>headers</code> to read one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
  <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">file</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;foo&quot; &quot;Value&quot;:&quot;0&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;bar&quot; &quot;Value&quot;:&quot;1&quot;&gt;</span>
<span class="ruby-comment">#&lt;CSV::Row &quot;Name&quot;:&quot;baz&quot; &quot;Value&quot;:&quot;2&quot;&gt;</span>
</pre>

<h5 id="label-Recipe-3A+Parse+from+IO+Stream+Without+Headers">Recipe: Parse from IO Stream Without Headers<span><a href="#label-Recipe-3A+Parse+from+IO+Stream+Without+Headers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use class method <a href="../../../CSV.html#method-c-parse"><code>CSV.parse</code></a> without option <code>headers</code> to read an IO stream all at once:</p>

<pre class="ruby"><span class="ruby-identifier">string</span> = <span class="ruby-string">&quot;foo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">path</span> = <span class="ruby-string">&#39;t.csv&#39;</span>
<span class="ruby-constant">File</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">string</span>)
<span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
  <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">file</span>)
<span class="ruby-keyword">end</span> <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<p>Use class method <a href="../../../CSV.html#method-c-foreach"><code>CSV.foreach</code></a> without option <code>headers</code> to read one row at a time:</p>

<pre class="ruby"><span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
  <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">file</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>Output:</p>

<pre class="ruby">[<span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-string">&quot;0&quot;</span>]
[<span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-string">&quot;1&quot;</span>]
[<span class="ruby-string">&quot;baz&quot;</span>, <span class="ruby-string">&quot;2&quot;</span>]
</pre>

<h3 id="label-RFC+4180+Compliance">RFC 4180 Compliance<span><a href="#label-RFC+4180+Compliance">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>By default, CSV parses data that is compliant with <a href="https://tools.ietf.org/html/rfc4180">RFC 4180</a> with respect to:</p>
<ul><li>
<p>Row separator.</p>
</li><li>
<p>Column separator.</p>
</li><li>
<p>Quote character.</p>
</li></ul>

<h4 id="label-Row+Separator">Row Separator<span><a href="#label-Row+Separator">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>RFC 4180 specifies the row separator CRLF (Ruby <code>&quot;\r\n&quot;</code>).</p>

<p>Although the CSV default row separator is <code>&quot;\n&quot;</code>, the parser also by default handles row separator <code>&quot;\r&quot;</code> and the RFC-compliant <code>&quot;\r\n&quot;</code>.</p>

<h5 id="label-Recipe-3A+Handle+Compliant+Row+Separator">Recipe: Handle Compliant Row Separator<span><a href="#label-Recipe-3A+Handle+Compliant+Row+Separator">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>For strict compliance, use option <code>:row_sep</code> to specify row separator <code>&quot;\r\n&quot;</code>, which allows the compliant row separator:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\r\nbar,1\r\nbaz,2\r\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">row_sep:</span> <span class="ruby-string">&quot;\r\n&quot;</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<p>But rejects other row separators:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">row_sep:</span> <span class="ruby-string">&quot;\r\n&quot;</span>) <span class="ruby-comment"># Raised MalformedCSVError</span>
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\rbar,1\rbaz,2\r&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">row_sep:</span> <span class="ruby-string">&quot;\r\n&quot;</span>) <span class="ruby-comment"># Raised MalformedCSVError</span>
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\n\rbar,1\n\rbaz,2\n\r&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">row_sep:</span> <span class="ruby-string">&quot;\r\n&quot;</span>) <span class="ruby-comment"># Raised MalformedCSVError</span>
</pre>

<h5 id="label-Recipe-3A+Handle+Non-Compliant+Row+Separator">Recipe: Handle Non-Compliant Row Separator<span><a href="#label-Recipe-3A+Handle+Non-Compliant+Row+Separator">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>For data with non-compliant row separators, use option <code>:row_sep</code>. This example source uses semicolon (<code>&quot;;&quot;</code>) as its row separator:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1;bar,1;baz,2;&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">row_sep:</span> <span class="ruby-string">&#39;;&#39;</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h4 id="label-Column+Separator">Column Separator<span><a href="#label-Column+Separator">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>RFC 4180 specifies column separator COMMA (Ruby <code>&quot;,&quot;</code>).</p>

<h5 id="label-Recipe-3A+Handle+Compliant+Column+Separator">Recipe: Handle Compliant Column Separator<span><a href="#label-Recipe-3A+Handle+Compliant+Column+Separator">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Because the CSV default comma separator is &#39;,&#39;, you need not specify option <code>:col_sep</code> for compliant data:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h5 id="label-Recipe-3A+Handle+Non-Compliant+Column+Separator">Recipe: Handle Non-Compliant Column Separator<span><a href="#label-Recipe-3A+Handle+Non-Compliant+Column+Separator">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>For data with non-compliant column separators, use option <code>:col_sep</code>. This example source uses TAB (<code>&quot;\t&quot;</code>) as its column separator:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;foo,1\tbar,1\tbaz,2&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">col_sep:</span> <span class="ruby-string">&quot;\t&quot;</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h4 id="label-Quote+Character">Quote Character<span><a href="#label-Quote+Character">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>RFC 4180 specifies quote character DQUOTE (Ruby <code>&quot;\&quot;&quot;</code>).</p>

<h5 id="label-Recipe-3A+Handle+Compliant+Quote+Character">Recipe: Handle Compliant Quote Character<span><a href="#label-Recipe-3A+Handle+Compliant+Quote+Character">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Because the CSV default quote character is <code>&quot;\&quot;&quot;</code>, you need not specify option <code>:quote_char</code> for compliant data:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;\&quot;foo\&quot;,\&quot;1\&quot;\n\&quot;bar\&quot;,\&quot;1\&quot;\n\&quot;baz\&quot;,\&quot;2\&quot;\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h5 id="label-Recipe-3A+Handle+Non-Compliant+Quote+Character">Recipe: Handle Non-Compliant Quote Character<span><a href="#label-Recipe-3A+Handle+Non-Compliant+Quote+Character">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>For data with non-compliant quote characters, use option <code>:quote_char</code>. This example source uses SQUOTE (<code>&quot;&#39;&quot;</code>) as its quote character:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;&#39;foo&#39;,&#39;1&#39;\n&#39;bar&#39;,&#39;1&#39;\n&#39;baz&#39;,&#39;2&#39;\n&quot;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">quote_char:</span> <span class="ruby-string">&quot;&#39;&quot;</span>) <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;1&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h4 id="label-Recipe-3A+Allow+Liberal+Parsing">Recipe: Allow Liberal Parsing<span><a href="#label-Recipe-3A+Allow+Liberal+Parsing">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Use option <code>:liberal_parsing</code> to specify that CSV should attempt to parse input not conformant with RFC 4180, such as double quotes in unquoted fields:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&#39;is,this &quot;three, or four&quot;,fields&#39;</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>) <span class="ruby-comment"># Raises MalformedCSVError</span>
<span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">liberal_parsing:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># =&gt; [[&quot;is&quot;, &quot;this \&quot;three&quot;, &quot; or four\&quot;&quot;, &quot;fields&quot;]]</span>
</pre>

<h3 id="label-Special+Handling">Special Handling<span><a href="#label-Special+Handling">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can use parsing options to specify special handling for certain lines and fields.</p>

<h4 id="label-Special+Line+Handling">Special Line Handling<span><a href="#label-Special+Line+Handling">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Use parsing options to specify special handling for blank lines, or for other selected lines.</p>

<h5 id="label-Recipe-3A+Ignore+Blank+Lines">Recipe: Ignore Blank Lines<span><a href="#label-Recipe-3A+Ignore+Blank+Lines">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use option <code>:skip_blanks</code> to ignore blank lines:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-identifier">&lt;&lt;-EOT</span>
<span class="ruby-value">foo,0

bar,1
baz,2

,
</span><span class="ruby-identifier">EOT</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">skip_blanks:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-identifier">parsed</span> <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;], [nil, nil]]</span>
</pre>

<h5 id="label-Recipe-3A+Ignore+Selected+Lines">Recipe: Ignore Selected Lines<span><a href="#label-Recipe-3A+Ignore+Selected+Lines">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use option <code>:skip_lines</code> to ignore selected lines.</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-identifier">&lt;&lt;-EOT</span>
<span class="ruby-value"># Comment
foo,0
bar,1
baz,2
# Another comment
</span><span class="ruby-identifier">EOT</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">skip_lines:</span> <span class="ruby-regexp">/^#/</span>)
<span class="ruby-identifier">parsed</span> <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<h4 id="label-Special+Field+Handling">Special Field Handling<span><a href="#label-Special+Field+Handling">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Use parsing options to specify special handling for certain field values.</p>

<h5 id="label-Recipe-3A+Strip+Fields">Recipe: Strip Fields<span><a href="#label-Recipe-3A+Strip+Fields">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use option <code>:strip</code> to strip parsed field values:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse_line</span>(<span class="ruby-string">&#39; a , b &#39;</span>, <span class="ruby-value">strip:</span> <span class="ruby-keyword">true</span>) <span class="ruby-comment"># =&gt; [&quot;a&quot;, &quot;b&quot;]</span>
</pre>

<h5 id="label-Recipe-3A+Handle+Null+Fields">Recipe: Handle Null Fields<span><a href="#label-Recipe-3A+Handle+Null+Fields">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use option <code>:nil_value</code> to specify a value that will replace each field that is null (no text):</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse_line</span>(<span class="ruby-string">&#39;a,,b,,c&#39;</span>, <span class="ruby-value">nil_value:</span> <span class="ruby-value">0</span>) <span class="ruby-comment"># =&gt; [&quot;a&quot;, 0, &quot;b&quot;, 0, &quot;c&quot;]</span>
</pre>

<h5 id="label-Recipe-3A+Handle+Empty+Fields">Recipe: Handle Empty Fields<span><a href="#label-Recipe-3A+Handle+Empty+Fields">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Use option <code>:empty_value</code> to specify a value that will replace each field that is empty (String of length 0);</p>

<pre class="ruby"><span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse_line</span>(<span class="ruby-string">&#39;a,&quot;&quot;,b,&quot;&quot;,c&#39;</span>, <span class="ruby-value">empty_value:</span> <span class="ruby-string">&#39;x&#39;</span>) <span class="ruby-comment"># =&gt; [&quot;a&quot;, &quot;x&quot;, &quot;b&quot;, &quot;x&quot;, &quot;c&quot;]</span>
</pre>

<h3 id="label-Converting+Fields">Converting Fields<span><a href="#label-Converting+Fields">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can use field converters to change parsed String fields into other objects, or to otherwise modify the String fields.</p>

<h4 id="label-Converting+Fields+to+Objects">Converting Fields to Objects<span><a href="#label-Converting+Fields+to+Objects">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Use field converters to change parsed String objects into other, more specific, objects.</p>

<p>There are built-in field converters for converting to objects of certain classes:</p>
<ul><li>
<p>Float</p>
</li><li>
<p>Integer</p>
</li><li>
<p>Date</p>
</li><li>
<p>DateTime</p>
</li></ul>

<p>Other built-in field converters include:</p>
<ul><li>
<p><code>:numeric</code>: converts to Integer and Float.</p>
</li><li>
<p><code>:all</code>: converts to DateTime, Integer, Float.</p>
</li></ul>

<p>You can also define field converters to convert to objects of other classes.</p>

<h5 id="label-Recipe-3A+Convert+Fields+to+Integers">Recipe: Convert Fields to Integers<span><a href="#label-Recipe-3A+Convert+Fields+to+Integers">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert fields to Integer objects using built-in converter <code>:integer</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:integer</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Value&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Integer, Integer, Integer]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Fields+to+Floats">Recipe: Convert Fields to Floats<span><a href="#label-Recipe-3A+Convert+Fields+to+Floats">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert fields to Float objects using built-in converter <code>:float</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:float</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Value&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Float, Float, Float]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Fields+to+Numerics">Recipe: Convert Fields to Numerics<span><a href="#label-Recipe-3A+Convert+Fields+to+Numerics">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert fields to Integer and Float objects using built-in converter <code>:numeric</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1.1\nbaz,2.2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:numeric</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Value&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Integer, Float, Float]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Fields+to+Dates">Recipe: Convert Fields to Dates<span><a href="#label-Recipe-3A+Convert+Fields+to+Dates">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert fields to Date objects using built-in converter <code>:date</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Date\nfoo,2001-02-03\nbar,2001-02-04\nbaz,2001-02-03\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:date</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Date&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Date, Date, Date]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Fields+to+DateTimes">Recipe: Convert Fields to DateTimes<span><a href="#label-Recipe-3A+Convert+Fields+to+DateTimes">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert fields to DateTime objects using built-in converter <code>:date_time</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,DateTime\nfoo,2001-02-03\nbar,2001-02-04\nbaz,2020-05-07T14:59:00-05:00\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:date_time</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;DateTime&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [DateTime, DateTime, DateTime]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Assorted+Fields+to+Objects">Recipe: Convert Assorted Fields to Objects<span><a href="#label-Recipe-3A+Convert+Assorted+Fields+to+Objects">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Convert assorted fields to objects using built-in converter <code>:all</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Type,Value\nInteger,0\nFloat,1.0\nDateTime,2001-02-04\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:all</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Value&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Integer, Float, DateTime]</span>
</pre>

<h5 id="label-Recipe-3A+Convert+Fields+to+Other+Objects">Recipe: Convert Fields to Other Objects<span><a href="#label-Recipe-3A+Convert+Fields+to+Other+Objects">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Define a custom field converter to convert String fields into other objects. This example defines and uses a custom field converter that converts each column-1 value to a Rational object:</p>

<pre class="ruby"><span class="ruby-identifier">rational_converter</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span>, <span class="ruby-identifier">field_context</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">field_context</span>.<span class="ruby-identifier">index</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">to_r</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">field</span>
<span class="ruby-keyword">end</span>
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-identifier">rational_converter</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">&#39;Value&#39;</span>].<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Rational, Rational, Rational]</span>
</pre>

<h4 id="label-Recipe-3A+Filter+Field+Strings">Recipe: Filter Field Strings<span><a href="#label-Recipe-3A+Filter+Field+Strings">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Define a custom field converter to modify String fields. This example defines and uses a custom field converter that strips whitespace from each field value:</p>

<pre class="ruby"><span class="ruby-identifier">strip_converter</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">strip</span> }
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\n foo , 0 \n bar , 1 \n baz , 2 \n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-identifier">strip_converter</span>)
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Name&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]</span>
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Value&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;0&quot;, &quot;1&quot;, &quot;2&quot;]</span>
</pre>

<h4 id="label-Recipe-3A+Register+Field+Converters">Recipe: Register Field Converters<span><a href="#label-Recipe-3A+Register+Field+Converters">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Register a custom field converter, assigning it a name; then refer to the converter by its name:</p>

<pre class="ruby"><span class="ruby-identifier">rational_converter</span> = <span class="ruby-identifier">proc</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">field</span>, <span class="ruby-identifier">field_context</span><span class="ruby-operator">|</span>
  <span class="ruby-identifier">field_context</span>.<span class="ruby-identifier">index</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">to_r</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">field</span>
<span class="ruby-keyword">end</span>
<span class="ruby-constant">CSV</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span>[<span class="ruby-value">:rational</span>] = <span class="ruby-identifier">rational_converter</span>
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:rational</span>)
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Value&#39;</span>] <span class="ruby-comment"># =&gt; [(0/1), (1/1), (2/1)]</span>
</pre>

<h4 id="label-Using+Multiple+Field+Converters">Using Multiple Field Converters<span><a href="#label-Using+Multiple+Field+Converters">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can use multiple field converters in either of these ways:</p>
<ul><li>
<p>Specify converters in option <code>:converters</code>.</p>
</li><li>
<p>Specify converters in a custom converter list.</p>
</li></ul>

<h5 id="label-Recipe-3A+Specify+Multiple+Field+Converters+in+Option+-3Aconverters">Recipe: Specify Multiple Field Converters in Option <code>:converters</code><span><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+Option+-3Aconverters">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Apply multiple field converters by specifying them in option <code>:conveters</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1.0\nbaz,2.0\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> [<span class="ruby-value">:integer</span>, <span class="ruby-value">:float</span>])
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Value&#39;</span>] <span class="ruby-comment"># =&gt; [0, 1.0, 2.0]</span>
</pre>

<h5 id="label-Recipe-3A+Specify+Multiple+Field+Converters+in+a+Custom+Converter+List">Recipe: Specify Multiple Field Converters in a Custom Converter List<span><a href="#label-Recipe-3A+Specify+Multiple+Field+Converters+in+a+Custom+Converter+List">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Apply multiple field converters by defining and registering a custom converter list:</p>

<pre class="ruby"><span class="ruby-identifier">strip_converter</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">field</span><span class="ruby-operator">|</span> <span class="ruby-identifier">field</span>.<span class="ruby-identifier">strip</span> }
<span class="ruby-constant">CSV</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span>[<span class="ruby-value">:strip</span>] = <span class="ruby-identifier">strip_converter</span>
<span class="ruby-constant">CSV</span><span class="ruby-operator">::</span><span class="ruby-constant">Converters</span>[<span class="ruby-value">:my_converters</span>] = [<span class="ruby-value">:integer</span>, <span class="ruby-value">:float</span>, <span class="ruby-value">:strip</span>]
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\n foo , 0 \n bar , 1.0 \n baz , 2.0 \n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:my_converters</span>)
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Name&#39;</span>] <span class="ruby-comment"># =&gt; [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;]</span>
<span class="ruby-identifier">parsed</span>[<span class="ruby-string">&#39;Value&#39;</span>] <span class="ruby-comment"># =&gt; [0, 1.0, 2.0]</span>
</pre>

<h3 id="label-Converting+Headers">Converting Headers<span><a href="#label-Converting+Headers">&para;</a> <a href="#top">&uarr;</a></span></h3>

<p>You can use header converters to modify parsed String headers.</p>

<p>Built-in header converters include:</p>
<ul><li>
<p><code>:symbol</code>: converts String header to Symbol.</p>
</li><li>
<p><code>:downcase</code>: converts String header to lowercase.</p>
</li></ul>

<p>You can also define header converters to otherwise modify header Strings.</p>

<h4 id="label-Recipe-3A+Convert+Headers+to+Lowercase">Recipe: Convert Headers to Lowercase<span><a href="#label-Recipe-3A+Convert+Headers+to+Lowercase">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Convert headers to lowercase using built-in converter <code>:downcase</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> <span class="ruby-value">:downcase</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [&quot;name&quot;, &quot;value&quot;]</span>
</pre>

<h4 id="label-Recipe-3A+Convert+Headers+to+Symbols">Recipe: Convert Headers to Symbols<span><a href="#label-Recipe-3A+Convert+Headers+to+Symbols">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Convert headers to downcased Symbols using built-in converter <code>:symbol</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> <span class="ruby-value">:symbol</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [:name, :value]</span>
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">header</span><span class="ruby-operator">|</span> <span class="ruby-identifier">header</span>.<span class="ruby-identifier">class</span>} <span class="ruby-comment"># =&gt; [Symbol, Symbol]</span>
</pre>

<h4 id="label-Recipe-3A+Filter+Header+Strings">Recipe: Filter Header Strings<span><a href="#label-Recipe-3A+Filter+Header+Strings">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Define a custom header converter to modify String fields. This example defines and uses a custom header converter that capitalizes each header String:</p>

<pre class="ruby"><span class="ruby-identifier">capitalize_converter</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">header</span><span class="ruby-operator">|</span> <span class="ruby-identifier">header</span>.<span class="ruby-identifier">capitalize</span> }
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;NAME,VALUE\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> <span class="ruby-identifier">capitalize_converter</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [&quot;Name&quot;, &quot;Value&quot;]</span>
</pre>

<h4 id="label-Recipe-3A+Register+Header+Converters">Recipe: Register Header Converters<span><a href="#label-Recipe-3A+Register+Header+Converters">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>Register a custom header converter, assigning it a name; then refer to the converter by its name:</p>

<pre class="ruby"><span class="ruby-identifier">capitalize_converter</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">header</span><span class="ruby-operator">|</span> <span class="ruby-identifier">header</span>.<span class="ruby-identifier">capitalize</span> }
<span class="ruby-constant">CSV</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderConverters</span>[<span class="ruby-value">:capitalize</span>] = <span class="ruby-identifier">capitalize_converter</span>
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;NAME,VALUE\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> <span class="ruby-value">:capitalize</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [&quot;Name&quot;, &quot;Value&quot;]</span>
</pre>

<h4 id="label-Using+Multiple+Header+Converters">Using Multiple Header Converters<span><a href="#label-Using+Multiple+Header+Converters">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>You can use multiple header converters in either of these ways:</p>
<ul><li>
<p>Specify header converters in option <code>:header_converters</code>.</p>
</li><li>
<p>Specify header converters in a custom header converter list.</p>
</li></ul>

<h5 id="label-Recipe-3A+Specify+Multiple+Header+Converters+in+Option+-3Aheader_converters">Recipe: Specify Multiple Header Converters in Option :header_converters<span><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+Option+-3Aheader_converters">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Apply multiple header converters by specifying them in option <code>:header_conveters</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1.0\nbaz,2.0\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> [<span class="ruby-value">:downcase</span>, <span class="ruby-value">:symbol</span>])
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [:name, :value]</span>
</pre>

<h5 id="label-Recipe-3A+Specify+Multiple+Header+Converters+in+a+Custom+Header+Converter+List">Recipe: Specify Multiple Header Converters in a Custom Header Converter List<span><a href="#label-Recipe-3A+Specify+Multiple+Header+Converters+in+a+Custom+Header+Converter+List">&para;</a> <a href="#top">&uarr;</a></span></h5>

<p>Apply multiple header converters by defining and registering a custom header converter list:</p>

<pre class="ruby"><span class="ruby-constant">CSV</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderConverters</span>[<span class="ruby-value">:my_header_converters</span>] = [<span class="ruby-value">:symbol</span>, <span class="ruby-value">:downcase</span>]
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;NAME,VALUE\nfoo,0\nbar,1.0\nbaz,2.0\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">headers:</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">header_converters:</span> <span class="ruby-value">:my_header_converters</span>)
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">headers</span> <span class="ruby-comment"># =&gt; [:name, :value]</span>
</pre>

<h3 id="label-Diagnostics">Diagnostics<span><a href="#label-Diagnostics">&para;</a> <a href="#top">&uarr;</a></span></h3>

<h4 id="label-Recipe-3A+Capture+Unconverted+Fields">Recipe: Capture Unconverted Fields<span><a href="#label-Recipe-3A+Capture+Unconverted+Fields">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>To capture unconverted field values, use option <code>:unconverted_fields</code>:</p>

<pre class="ruby"><span class="ruby-identifier">source</span> = <span class="ruby-string">&quot;Name,Value\nfoo,0\nbar,1\nbaz,2\n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">converters:</span> <span class="ruby-value">:integer</span>, <span class="ruby-value">unconverted_fields:</span> <span class="ruby-keyword">true</span>)
<span class="ruby-identifier">parsed</span> <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
<span class="ruby-identifier">parsed</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-identifier">row</span>.<span class="ruby-identifier">unconverted_fields</span> }
</pre>

<p>Output:</p>

<pre class="ruby">[<span class="ruby-string">&quot;Name&quot;</span>, <span class="ruby-string">&quot;Value&quot;</span>]
[<span class="ruby-string">&quot;foo&quot;</span>, <span class="ruby-string">&quot;0&quot;</span>]
[<span class="ruby-string">&quot;bar&quot;</span>, <span class="ruby-string">&quot;1&quot;</span>]
[<span class="ruby-string">&quot;baz&quot;</span>, <span class="ruby-string">&quot;2&quot;</span>]
</pre>

<h4 id="label-Recipe-3A+Capture+Field+Info">Recipe: Capture Field Info<span><a href="#label-Recipe-3A+Capture+Field+Info">&para;</a> <a href="#top">&uarr;</a></span></h4>

<p>To capture field info in a custom converter, accept two block arguments. The first is the field value; the second is a <code>CSV::FieldInfo</code> object:</p>

<pre class="ruby"><span class="ruby-identifier">strip_converter</span> = <span class="ruby-identifier">proc</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">field</span>, <span class="ruby-identifier">field_info</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-identifier">field_info</span>; <span class="ruby-identifier">field</span>.<span class="ruby-identifier">strip</span> }
<span class="ruby-identifier">source</span> = <span class="ruby-string">&quot; foo , 0 \n bar , 1 \n baz , 2 \n&quot;</span>
<span class="ruby-identifier">parsed</span> = <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">source</span>, <span class="ruby-value">converters:</span> <span class="ruby-identifier">strip_converter</span>)
<span class="ruby-identifier">parsed</span> <span class="ruby-comment"># =&gt; [[&quot;foo&quot;, &quot;0&quot;], [&quot;bar&quot;, &quot;1&quot;], [&quot;baz&quot;, &quot;2&quot;]]</span>
</pre>

<p>Output:</p>

<pre class="ruby"><span class="ruby-comment">#&lt;struct CSV::FieldInfo index=0, line=1, header=nil&gt;</span>
<span class="ruby-comment">#&lt;struct CSV::FieldInfo index=1, line=1, header=nil&gt;</span>
<span class="ruby-comment">#&lt;struct CSV::FieldInfo index=0, line=2, header=nil&gt;</span>
<span class="ruby-comment">#&lt;struct CSV::FieldInfo index=1, line=2, header=nil&gt;</span>
<span class="ruby-comment">#&lt;struct CSV::FieldInfo index=0, line=3, header=nil&gt;</span>
<span class="ruby-comment">#&lt;struct CSV::FieldInfo index=1, line=3, header=nil&gt;</span>
</pre>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

